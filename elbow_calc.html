<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>ГОСТ Отводы</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div class="calculator">
    <h2>Расчёт боковой площади стальных отводов (ГОСТ)</h2>

    <label>Номинальный диаметр (мм):</label>
    <select id="dn" onchange="updateElbow()">
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="32">32</option>
      <option value="40">40</option>
      <option value="50">50</option>
      <option value="57">57</option>
      <option value="76">76</option>
      <option value="89">89</option>
      <option value="108">108</option>
      <option value="133">133</option>
      <option value="159">159</option>
      <option value="219">219</option>
      <option value="273">273</option>
      <option value="325">325</option>
    </select>

    <label>Или введите свой наружный диаметр (мм):</label>
    <input type="number" id="custom_diameter" step="0.1" oninput="calcElbow()">
    <label>Толщина стенки (мм):
  <label for="insulation">Толщина изоляции (мм):</label>
  <input type="number" id="insulation" value="0"><br>
</label>
    <input type="number" id="thickness" step="0.1" oninput="calcElbow()">

    <label>Угол отвода (°):</label>
    <select id="angle" onchange="calcElbow()">
      <option value="30">30°</option>
      <option value="45">45°</option>
      <option value="60">60°</option>
      <option value="90" selected>90°</option>
    </select>

    <button onclick="calcElbow()">Рассчитать</button>

    <div class="result" id="result"></div>
    <a href="index.html">← Назад</a>
  </div>

  <script>
    const elbowThickness = {
      57: 2.5,
      76: 2.8,
      89: 3.0,
      108: 3.2,
      133: 3.5,
      159: 4.0,
      219: 4.5,
      273: 6.0,
      325: 7.0
    };

    function updateElbow() {
      const dn = document.getElementById('dn').value;
      document.getElementById('thickness').value = elbowThickness[dn] || '';
      calcElbow();
    }

    function calcElbow() {
      const customD = parseFloat(document.getElementById('custom_diameter').value);
      let dn = parseFloat(document.getElementById('dn').value);
      if (!isNaN(customD) && customD > 0) dn = customD;
      const angle = parseFloat(document.getElementById('angle').value);
      const thickness = parseFloat(document.getElementById('thickness').value);
      if (isNaN(dn) || isNaN(thickness)) return;

      let outerD, innerD, avgD;
      if (dn <= 50) {
        innerD = dn;
        outerD = innerD + 2 * thickness;
      } else {
        outerD = dn;
        innerD = outerD - 2 * thickness;
      }
      avgD = (outerD + innerD) / 2;
      const radius = avgD / 2;
      const arcLength = (Math.PI * radius * angle) / 180;
      const area = Math.PI * avgD * arcLength;

      document.getElementById('result').innerHTML = `
        Наружный диаметр: ${outerD.toFixed(1)} мм<br>
        Внутренний диаметр: ${innerD.toFixed(1)} мм<br>
        Средний диаметр: ${avgD.toFixed(1)} мм<br>
        Длина дуги: ${arcLength.toFixed(1)} мм<br>
        Площадь: ${area.toFixed(2)} мм²<br><strong>Итого: ${(area / 1e6).toFixed(4)} м²</strong><br>
         <em>Принято, что DN ${dn} мм = ${dn <= 50 ? 'внутренний диаметр' : 'наружный диаметр'} по ГОСТ</em>
      `;
    }

    updateElbow();
  </script>
</body>
</html>
